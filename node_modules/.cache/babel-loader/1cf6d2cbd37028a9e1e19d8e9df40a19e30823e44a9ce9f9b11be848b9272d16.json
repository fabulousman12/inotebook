{"ast":null,"code":"import React,{useContext,useEffect,useRef,useState}from'react';import NoteContext from'../context/notes/NoteContext';import NoteItem from'./NoteItem';import{Addnote}from'./Addnote';import{useHistory}from\"react-router\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Notes=props=>{const context=useContext(NoteContext);const{notes,getNote,editNote}=context;let history=useHistory();useEffect(()=>{let token=localStorage.getItem('token');if(token){getNote(token);}else{history.push('/login');}},[getNote]);const ref=useRef(null);const refClose=useRef(null);// Ref to close the modal after updating\nconst[note,setNote]=useState({id:\"\",etitle:\"\",edescription:\"\",etag:\"\"});const updatenote=currentnote=>{ref.current.click();setNote({id:currentnote._id,etitle:currentnote.title,edescription:currentnote.description,etag:currentnote.tag});};const handleClick=e=>{e.preventDefault();editNote(note.id,note.etitle,note.edescription,note.etag);refClose.current.click();// Close the modal after updating\n};const onChange=e=>{const{name,value}=e.target;setNote(prevNote=>({...prevNote,[name]:value||\"\"// Ensure a defined value, use an empty string if value is undefined\n}));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Addnote,{}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",ref:ref,className:\"btn btn-primary\",\"data-bs-toggle\":\"modal\",\"data-bs-target\":\"#exampleModal\",style:{display:\"none\"},children:\"Launch demo modal\"}),/*#__PURE__*/_jsx(\"div\",{className:\"modal fade\",id:\"exampleModal\",tabIndex:\"-1\",\"aria-labelledby\":\"exampleModalLabel\",\"aria-hidden\":\"true\",style:{color:'black'},children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"modal-title fs-5\",id:\"exampleModalLabel\",children:\"Edit Note\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close\",\"data-bs-dismiss\":\"modal\",\"aria-label\":\"Close\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"etitle\",className:\"form-label\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"etitle\",name:\"etitle\",value:note.etitle,onChange:onChange,minLength:3,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"edescription\",className:\"form-label\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",id:\"edescription\",name:\"edescription\",value:note.edescription,onChange:onChange,minLength:5,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"etag\",className:\"form-label\",children:\"Tag\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"etag\",name:\"etag\",value:note.etag,onChange:onChange})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",\"data-bs-dismiss\":\"modal\",ref:refClose,children:\"Close\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary\",disabled:note.etitle.length<3||note.edescription.length<5,onClick:handleClick,children:\"Update Changes\"})]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"container row my-3\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Your Notes\"}),/*#__PURE__*/_jsx(\"div\",{className:\"conatiner mx-2\",children:notes.length===0&&'No notes to display'}),notes&&notes.map((note,index)=>{return/*#__PURE__*/_jsx(NoteItem,{updatenote:updatenote,note:note},note._id+index);})]})]});};export default Notes;","map":{"version":3,"names":["React","useContext","useEffect","useRef","useState","NoteContext","NoteItem","Addnote","useHistory","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Notes","props","context","notes","getNote","editNote","history","token","localStorage","getItem","push","ref","refClose","note","setNote","id","etitle","edescription","etag","updatenote","currentnote","current","click","_id","title","description","tag","handleClick","e","preventDefault","onChange","name","value","target","prevNote","children","type","className","style","display","tabIndex","color","htmlFor","minLength","required","disabled","length","onClick","map","index"],"sources":["D:/learn-react-03/inotebook/src/components/Notes.js"],"sourcesContent":["import React, { useContext, useEffect, useRef, useState } from 'react';\r\nimport NoteContext from '../context/notes/NoteContext';\r\nimport NoteItem from './NoteItem';\r\nimport { Addnote } from './Addnote';\r\nimport {useHistory} from \"react-router\"\r\nconst Notes = (props) => {\r\n    const context = useContext(NoteContext);\r\n    const { notes, getNote, editNote } = context;\r\n    let history = useHistory()\r\n    useEffect(() => {\r\n        let token = localStorage.getItem('token')\r\n        if(token){\r\n            getNote(token);\r\n        }else{\r\n             history.push('/login')\r\n        }\r\n       \r\n    }, [getNote]);\r\n\r\n    const ref = useRef(null);\r\n    const refClose = useRef(null); // Ref to close the modal after updating\r\n\r\n    const [note, setNote] = useState({ id: \"\", etitle: \"\", edescription: \"\", etag: \"\" });\r\n\r\n    const updatenote = (currentnote) => {\r\n        ref.current.click();\r\n        setNote({ id: currentnote._id, etitle: currentnote.title, edescription: currentnote.description, etag: currentnote.tag });\r\n     \r\n    };\r\n\r\n    const handleClick = (e) => {\r\n        e.preventDefault();\r\n        editNote(note.id, note.etitle, note.edescription, note.etag);\r\n     \r\n        refClose.current.click(); // Close the modal after updating\r\n    };\r\n\r\n    const onChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setNote(prevNote => ({\r\n            ...prevNote,\r\n            [name]: value || \"\" // Ensure a defined value, use an empty string if value is undefined\r\n        }));\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Addnote />\r\n            <button type=\"button\" ref={ref} className=\"btn btn-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#exampleModal\" style={{ display: \"none\" }}>\r\n                Launch demo modal\r\n            </button>\r\n\r\n            <div className=\"modal fade\" id=\"exampleModal\" tabIndex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\" style={{color:'black'}}>\r\n                <div className=\"modal-dialog\">\r\n                    <div className=\"modal-content\">\r\n                        <div className=\"modal-header\">\r\n                            <h1 className=\"modal-title fs-5\" id=\"exampleModalLabel\">Edit Note</h1>\r\n                            <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n                        </div>\r\n                        <div className=\"modal-body\">\r\n                            <form>\r\n                                <div className=\"mb-3\">\r\n                                    <label htmlFor=\"etitle\" className=\"form-label\">Title</label>\r\n                                    <input type=\"text\" className=\"form-control\" id=\"etitle\" name=\"etitle\" value={note.etitle} onChange={onChange} minLength={3} required/>\r\n                                </div>\r\n                                <div className=\"mb-3\">\r\n                                    <label htmlFor=\"edescription\" className=\"form-label\">Description</label>\r\n                                    <textarea className=\"form-control\" id=\"edescription\" name=\"edescription\" value={note.edescription} onChange={onChange} minLength={5} required ></textarea>\r\n                                </div>\r\n                                <div className=\"mb-3\">\r\n                                    <label htmlFor=\"etag\" className=\"form-label\">Tag</label>\r\n                                    <input type=\"text\" className=\"form-control\" id=\"etag\" name=\"etag\" value={note.etag} onChange={onChange} />\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                        <div className=\"modal-footer\">\r\n                            <button type=\"button\" className=\"btn btn-secondary\" data-bs-dismiss=\"modal\" ref={refClose}>Close</button>\r\n                            <button type=\"button\" className=\"btn btn-primary\" disabled={note.etitle.length<3 || note.edescription.length<5} onClick={handleClick}>Update Changes</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"container row my-3\">\r\n                <h1>Your Notes</h1>\r\n                <div className=\"conatiner mx-2\">\r\n                {notes.length===0&&'No notes to display'}\r\n                </div>\r\n                {notes && notes.map((note, index) => {\r\n                    return <NoteItem key={note._id + index} updatenote={updatenote} note={note} />\r\n                })}\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Notes;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}