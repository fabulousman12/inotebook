{"ast":null,"code":"import React,{useState,useEffect,useContext}from'react';import{useHistory}from'react-router-dom';import noteContext from'../context/notes/NoteContext';import\"../login.css\";import{Redirect}from'react-router-dom/cjs/react-router-dom.min';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=props=>{const[credential,setCredential]=useState({email:\"\",password:\"\"});const history=useHistory();const context=useContext(noteContext);const{setIsAuthenticated}=context;useEffect(()=>{const checkToken=async()=>{const token=localStorage.getItem('token');if(token){try{console.log(\"workjing\"+token);const host=\"http://localhost:5000\";const response=await fetch(\"\".concat(host,\"/api/auth/getuser\"),{method:'POST',headers:{'Content-Type':'application/json','Auth':token}});const json=await response.json();console.log(json);if(json){setIsAuthenticated(true);console.log('good');history.push(\"/\");}}catch(error){console.error('Error checking token:',error);}}};checkToken();},[history]);const handleSubmit=async e=>{e.preventDefault();const host=\"http://localhost:5000\";const response=await fetch(\"\".concat(host,\"/api/auth/login\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:credential.email,password:credential.password})});const json=await response.json();if(json.success){// Save token and set authentication state\nlocalStorage.setItem('token',json.authtoken);props.onLoginSuccess();setIsAuthenticated(true);props.ShowAlert(\"Log in successfully\",\"success\");history.push(\"/home\");}else{props.ShowAlert(\"Invalid credential\",\"danger\");}};const onChange=e=>{setCredential({...credential,[e.target.name]:e.target.value});};const handleSignupRedirect=()=>{history.push('/signup');};return/*#__PURE__*/_jsx(\"div\",{className:\"container my-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"mb-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"unique-background mb-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"unique-shape one\"}),/*#__PURE__*/_jsx(\"div\",{className:\"unique-shape two\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"unique-form mx-2 my-3\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h3\",{className:\"unique-form-title\",children:\"Login Here\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"unique-email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"unique-email\",name:\"email\",className:\"form-control\",value:credential.email,onChange:onChange,autoComplete:\"email\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"unique-password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"unique-password\",name:\"password\",className:\"form-control\",value:credential.password,onChange:onChange,autoComplete:\"current-password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"btn-container md-2 my-3\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"unique-btn\",children:\"Log In\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"unique-btn\",onClick:handleSignupRedirect,children:\"Sign Up\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"unique-social\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"unique-go\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fab fa-google\"}),\" Google\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"unique-fb\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fab fa-facebook\"}),\" Facebook\"]})]})]})]})})});};export default Login;","map":{"version":3,"names":["React","useState","useEffect","useContext","useHistory","noteContext","Redirect","jsx","_jsx","jsxs","_jsxs","Login","props","credential","setCredential","email","password","history","context","setIsAuthenticated","checkToken","token","localStorage","getItem","console","log","host","response","fetch","concat","method","headers","json","push","error","handleSubmit","e","preventDefault","body","JSON","stringify","success","setItem","authtoken","onLoginSuccess","ShowAlert","onChange","target","name","value","handleSignupRedirect","className","children","onSubmit","htmlFor","type","id","autoComplete","onClick"],"sources":["D:/learn-react-03/inotebook/src/components/Login.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport noteContext from '../context/notes/NoteContext';\r\nimport \"../login.css\";\r\nimport { Redirect } from 'react-router-dom/cjs/react-router-dom.min';\r\n\r\nconst Login = (props) => {\r\n    const [credential, setCredential] = useState({ email: \"\", password: \"\" });\r\n    const history = useHistory();\r\n    const context = useContext(noteContext);\r\n    const { setIsAuthenticated } = context;\r\n\r\n    useEffect(() => {\r\n      const checkToken = async () => {\r\n          const token = localStorage.getItem('token');\r\n          if (token) {\r\n              try {\r\n                console.log(\"workjing\" + token)\r\n                  const host = \"http://localhost:5000\";\r\n                  const response = await fetch(`${host}/api/auth/getuser`, {\r\n                      method: 'POST',\r\n                      headers: {\r\n                          'Content-Type': 'application/json',\r\n                          'Auth': token\r\n                      },\r\n                  });\r\n                  const json = await response.json();\r\n                  console.log(json)\r\n                  if (json) {\r\n                      setIsAuthenticated(true);\r\n                      console.log('good')\r\n                      history.push(\"/\");\r\n                  }\r\n              } catch (error) {\r\n                  console.error('Error checking token:', error);\r\n              }\r\n          }\r\n      };\r\n\r\n      checkToken();\r\n  }, [history]);\r\n\r\n\r\n    \r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        const host = \"http://localhost:5000\";\r\n        const response = await fetch(`${host}/api/auth/login`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({ email: credential.email, password: credential.password })\r\n        });\r\n        const json = await response.json();\r\n        if (json.success) {\r\n            // Save token and set authentication state\r\n            localStorage.setItem('token', json.authtoken);\r\n            props.onLoginSuccess();\r\n            setIsAuthenticated(true);\r\n            props.ShowAlert(\"Log in successfully\",\"success\")\r\n            history.push(\"/home\");\r\n        } else {\r\n          props.ShowAlert(\"Invalid credential\",\"danger\")\r\n        }\r\n    };\r\n\r\n    const onChange = (e) => {\r\n        setCredential({ ...credential, [e.target.name]: e.target.value });\r\n    };\r\n\r\n    const handleSignupRedirect = () => {\r\n        history.push('/signup');\r\n    };\r\n\r\n    return (\r\n        <div className=\"container my-3\">\r\n            <div className=\"mb-2\">\r\n                <div className=\"unique-background mb-2\">\r\n                    <div className=\"unique-shape one\"></div>\r\n                    <div className=\"unique-shape two\"></div>\r\n                    <form className=\"unique-form mx-2 my-3\" onSubmit={handleSubmit}>\r\n                        <h3 className=\"unique-form-title\">Login Here</h3>\r\n                        <label htmlFor=\"unique-email\">Email</label>\r\n                        <input\r\n                            type=\"email\"\r\n                            id=\"unique-email\"\r\n                            name=\"email\"\r\n                            className=\"form-control\"\r\n                            value={credential.email}\r\n                            onChange={onChange}\r\n                            autoComplete=\"email\"\r\n                        />\r\n                        <label htmlFor=\"unique-password\">Password</label>\r\n                        <input\r\n                            type=\"password\"\r\n                            id=\"unique-password\"\r\n                            name=\"password\"\r\n                            className=\"form-control\"\r\n                            value={credential.password}\r\n                            onChange={onChange}\r\n                            autoComplete=\"current-password\"\r\n                        />\r\n                        <div className=\"btn-container md-2 my-3\">\r\n                            <button type=\"submit\" className=\"unique-btn\">Log In</button>\r\n                            <button type=\"button\" className=\"unique-btn\" onClick={handleSignupRedirect}>Sign Up</button>\r\n                        </div>\r\n                        <div className=\"unique-social\">\r\n                            <div className=\"unique-go\">\r\n                                <i className=\"fab fa-google\"></i> Google\r\n                            </div>\r\n                            <div className=\"unique-fb\">\r\n                                <i className=\"fab fa-facebook\"></i> Facebook\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}